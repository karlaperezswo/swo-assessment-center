<mxfile host="app.diagrams.net" modified="2026-02-03T00:00:00.000Z" agent="Claude" version="24.0.0" type="device">
  <diagram name="Data Flow" id="data-flow">
    <mxGraphModel dx="1600" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- TITLE -->
        <mxCell id="title" value="Assessment Center — Diagrama de Flujo de Datos" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="480" y="15" width="540" height="40" as="geometry"/>
        </mxCell>

        <!-- ===================== FLOW 1: FILE UPLOAD ===================== -->
        <mxCell id="flow1_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E8FF;strokeColor=#8C4FFF;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="60" y="80" width="1680" height="300" as="geometry"/>
        </mxCell>
        <mxCell id="flow1_title" value="&lt;font style=&quot;font-size:16px&quot;&gt;&lt;b&gt;FLUJO 1: Carga de Archivo Excel (MPA Export)&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#8C4FFF;" vertex="1" parent="1">
          <mxGeometry x="80" y="88" width="500" height="30" as="geometry"/>
        </mxCell>

        <!-- Step 1.1 -->
        <mxCell id="f1s1" value="&lt;b&gt;1&lt;/b&gt;&lt;br&gt;Usuario selecciona&lt;br&gt;archivo Excel&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;(.xlsx MPA Export)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#8C4FFF;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="90" y="150" width="130" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="f1s1_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3E;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.users;" vertex="1" parent="1">
          <mxGeometry x="130" y="230" width="50" height="30" as="geometry"/>
        </mxCell>

        <!-- Step 1.2 -->
        <mxCell id="f1s2" value="&lt;b&gt;2&lt;/b&gt;&lt;br&gt;Frontend solicita&lt;br&gt;Presigned URL&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;POST /get-upload-url&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E7157B;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="280" y="150" width="130" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="f1s2_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.api_gateway" vertex="1" parent="1">
          <mxGeometry x="321" y="230" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 1.3 -->
        <mxCell id="f1s3" value="&lt;b&gt;3&lt;/b&gt;&lt;br&gt;Lambda genera&lt;br&gt;Presigned PUT URL&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;S3 PutObject signed&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#ED7100;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="470" y="150" width="130" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="f1s3_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda" vertex="1" parent="1">
          <mxGeometry x="511" y="230" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 1.4 -->
        <mxCell id="f1s4" value="&lt;b&gt;4&lt;/b&gt;&lt;br&gt;Browser sube archivo&lt;br&gt;directo a S3&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;PUT presignedUrl&lt;br&gt;(bypasses Lambda)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#3F8624;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="660" y="140" width="140" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="f1s4_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="706" y="235" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 1.5 -->
        <mxCell id="f1s5" value="&lt;b&gt;5&lt;/b&gt;&lt;br&gt;Frontend notifica&lt;br&gt;upload completo&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;POST /upload-from-s3&lt;br&gt;{key: uploads/uuid.xlsx}&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E7157B;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="860" y="140" width="150" height="85" as="geometry"/>
        </mxCell>

        <!-- Step 1.6 -->
        <mxCell id="f1s6" value="&lt;b&gt;6&lt;/b&gt;&lt;br&gt;Lambda descarga&lt;br&gt;de S3, parsea Excel&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;ExcelService.parse()&lt;br&gt;Servers · DBs · Apps&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#ED7100;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1070" y="140" width="150" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="f1s6_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda" vertex="1" parent="1">
          <mxGeometry x="1121" y="235" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 1.7 -->
        <mxCell id="f1s7" value="&lt;b&gt;7&lt;/b&gt;&lt;br&gt;Lambda elimina&lt;br&gt;archivo de S3&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Cleanup automático&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1280" y="150" width="130" height="70" as="geometry"/>
        </mxCell>

        <!-- Step 1.8 -->
        <mxCell id="f1s8" value="&lt;b&gt;8&lt;/b&gt;&lt;br&gt;Retorna datos&lt;br&gt;parseados al frontend&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;JSON: {servers, dbs, apps}&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1470" y="150" width="150" height="70" as="geometry"/>
        </mxCell>

        <!-- Flow 1 arrows -->
        <mxCell id="f1a1" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#8C4FFF;strokeWidth=2;" edge="1" source="f1s1" target="f1s2" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f1a2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#E7157B;strokeWidth=2;" edge="1" source="f1s2" target="f1s3" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f1a3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#ED7100;strokeWidth=2;" edge="1" source="f1s3" target="f1s4" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f1a4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#3F8624;strokeWidth=2;" edge="1" source="f1s4" target="f1s5" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f1a5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#E7157B;strokeWidth=2;" edge="1" source="f1s5" target="f1s6" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f1a6" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#ED7100;strokeWidth=2;" edge="1" source="f1s6" target="f1s7" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f1a7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" source="f1s7" target="f1s8" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ===================== FLOW 2: REPORT GENERATION ===================== -->
        <mxCell id="flow2_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF5EB;strokeColor=#ED7100;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="60" y="420" width="1680" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="flow2_title" value="&lt;font style=&quot;font-size:16px&quot;&gt;&lt;b&gt;FLUJO 2: Generación de Reporte de Evaluación&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#ED7100;" vertex="1" parent="1">
          <mxGeometry x="80" y="428" width="500" height="30" as="geometry"/>
        </mxCell>

        <!-- Step 2.1 -->
        <mxCell id="f2s1" value="&lt;b&gt;1&lt;/b&gt;&lt;br&gt;Usuario completa&lt;br&gt;formulario&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Datos del cliente&lt;br&gt;Región AWS · Vertical&lt;br&gt;Prioridades negocio&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#8C4FFF;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="90" y="480" width="140" height="95" as="geometry"/>
        </mxCell>

        <!-- Step 2.2 -->
        <mxCell id="f2s2" value="&lt;b&gt;2&lt;/b&gt;&lt;br&gt;POST /generate&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Payload:&lt;br&gt;• clientName, region&lt;br&gt;• excelData (parsed)&lt;br&gt;• businessContext&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E7157B;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="290" y="480" width="140" height="95" as="geometry"/>
        </mxCell>

        <!-- Step 2.3 -->
        <mxCell id="f2s3" value="&lt;b&gt;3&lt;/b&gt;&lt;br&gt;EC2 Rightsizing&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Analiza utilización CPU/RAM&lt;br&gt;Mapea a instancias EC2&lt;br&gt;Selecciona familia óptima&lt;br&gt;(t3, m5, c5, r5, etc.)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="490" y="470" width="160" height="105" as="geometry"/>
        </mxCell>

        <!-- Step 2.4 -->
        <mxCell id="f2s4" value="&lt;b&gt;4&lt;/b&gt;&lt;br&gt;RDS Mapping&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Mapea DB engines&lt;br&gt;SQL Server → RDS&lt;br&gt;Oracle → RDS/Aurora&lt;br&gt;MySQL/PostgreSQL&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="490" y="590" width="160" height="95" as="geometry"/>
        </mxCell>

        <!-- Step 2.5 -->
        <mxCell id="f2s5" value="&lt;b&gt;5&lt;/b&gt;&lt;br&gt;Cost Calculator&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Calcula 3 modelos:&lt;br&gt;• On-Demand pricing&lt;br&gt;• 1-Year NURI (Reserved)&lt;br&gt;• 3-Year NURI (Reserved)&lt;br&gt;Mensual · Anual · 3 años&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="710" y="470" width="160" height="115" as="geometry"/>
        </mxCell>

        <!-- Step 2.6 -->
        <mxCell id="f2s6" value="&lt;b&gt;6&lt;/b&gt;&lt;br&gt;DOCX Generation&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Genera documento Word:&lt;br&gt;• Portada (branding)&lt;br&gt;• Resumen ejecutivo&lt;br&gt;• Análisis infra&lt;br&gt;• Recomendaciones&lt;br&gt;• Desglose de costos&lt;br&gt;• Links calculadora&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="930" y="465" width="160" height="130" as="geometry"/>
        </mxCell>

        <!-- Step 2.7 -->
        <mxCell id="f2s7" value="&lt;b&gt;7&lt;/b&gt;&lt;br&gt;Save to S3&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;s3://bucket/generated/&lt;br&gt;assessment-{client}-{ts}.docx&lt;br&gt;Auto-delete: 1 hora&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#3F8624;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1150" y="480" width="160" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="f2s7_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="1206" y="580" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 2.8 -->
        <mxCell id="f2s8" value="&lt;b&gt;8&lt;/b&gt;&lt;br&gt;Return Signed URL&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Retorna al frontend:&lt;br&gt;• downloadUrl (signed)&lt;br&gt;• calculatorLinks&lt;br&gt;• summary stats&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1370" y="480" width="150" height="90" as="geometry"/>
        </mxCell>

        <!-- Step 2.9 -->
        <mxCell id="f2s9" value="&lt;b&gt;9&lt;/b&gt;&lt;br&gt;Usuario descarga&lt;br&gt;reporte DOCX&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Click → Download&lt;br&gt;via signed URL&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1570" y="490" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- Flow 2 arrows -->
        <mxCell id="f2a1" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#8C4FFF;strokeWidth=2;" edge="1" source="f2s1" target="f2s2" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#E7157B;strokeWidth=2;" edge="1" source="f2s2" target="f2s3" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a2b" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#E7157B;strokeWidth=1;dashed=1;" edge="1" source="f2s2" target="f2s4" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#FF9800;strokeWidth=2;" edge="1" source="f2s3" target="f2s5" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a3b" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#FF9800;strokeWidth=1;dashed=1;" edge="1" source="f2s4" target="f2s5" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#FF9800;strokeWidth=2;" edge="1" source="f2s5" target="f2s6" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#3F8624;strokeWidth=2;" edge="1" source="f2s6" target="f2s7" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a6" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" source="f2s7" target="f2s8" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f2a7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" source="f2s8" target="f2s9" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ===================== FLOW 3: CI/CD ===================== -->
        <mxCell id="flow3_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF0F5;strokeColor=#CD2264;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="60" y="840" width="1680" height="250" as="geometry"/>
        </mxCell>
        <mxCell id="flow3_title" value="&lt;font style=&quot;font-size:16px&quot;&gt;&lt;b&gt;FLUJO 3: CI/CD y Despliegue&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#CD2264;" vertex="1" parent="1">
          <mxGeometry x="80" y="848" width="340" height="30" as="geometry"/>
        </mxCell>

        <!-- Step 3.1 -->
        <mxCell id="f3s1" value="&lt;b&gt;1&lt;/b&gt;&lt;br&gt;Developer push&lt;br&gt;to main branch&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;git push origin main&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#24292E;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="90" y="900" width="140" height="75" as="geometry"/>
        </mxCell>

        <!-- Step 3.2 -->
        <mxCell id="f3s2" value="&lt;b&gt;2&lt;/b&gt;&lt;br&gt;GitHub Webhook&lt;br&gt;notifica Amplify&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Trigger automático&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#CD2264;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="300" y="900" width="140" height="75" as="geometry"/>
        </mxCell>

        <!-- Step 3.3 -->
        <mxCell id="f3s3" value="&lt;b&gt;3&lt;/b&gt;&lt;br&gt;Amplify Build&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;npm install&lt;br&gt;npm run build (Vite)&lt;br&gt;Output: frontend/dist&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#CD2264;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="510" y="895" width="150" height="85" as="geometry"/>
        </mxCell>
        <mxCell id="f3s3_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#CD2264;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.amplify" vertex="1" parent="1">
          <mxGeometry x="561" y="990" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 3.4 -->
        <mxCell id="f3s4" value="&lt;b&gt;4&lt;/b&gt;&lt;br&gt;Deploy a&lt;br&gt;CloudFront CDN&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Assets distribuidos&lt;br&gt;globalmente&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#8C4FFF;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="730" y="900" width="140" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="f3s4_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudfront" vertex="1" parent="1">
          <mxGeometry x="776" y="990" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Step 3.5 -->
        <mxCell id="f3s5" value="&lt;b&gt;5&lt;/b&gt;&lt;br&gt;Live!&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Frontend actualizado&lt;br&gt;disponible vía HTTPS&lt;br&gt;Basic Auth protegido&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="940" y="900" width="140" height="75" as="geometry"/>
        </mxCell>

        <!-- Backend deploy (separate) -->
        <mxCell id="f3s6" value="&lt;b&gt;Backend Deploy (Manual)&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;1. tsc (build TypeScript)&lt;br&gt;2. ZIP dist/ + node_modules&lt;br&gt;3. Upload ZIP to S3&lt;br&gt;4. Update Lambda function code&lt;br&gt;&lt;i&gt;Script: deploy-backend.js&lt;/i&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#ED7100;fontSize=10;fontColor=#232F3E;align=left;spacingLeft=10;arcSize=10;" vertex="1" parent="1">
          <mxGeometry x="1200" y="890" width="220" height="95" as="geometry"/>
        </mxCell>
        <mxCell id="f3s6_icon" value="" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda" vertex="1" parent="1">
          <mxGeometry x="1286" y="995" width="48" height="48" as="geometry"/>
        </mxCell>

        <!-- Flow 3 arrows -->
        <mxCell id="f3a1" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#24292E;strokeWidth=2;" edge="1" source="f3s1" target="f3s2" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f3a2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#CD2264;strokeWidth=2;" edge="1" source="f3s2" target="f3s3" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f3a3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#CD2264;strokeWidth=2;" edge="1" source="f3s3" target="f3s4" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="f3a4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;rounded=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" source="f3s4" target="f3s5" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ===================== FLOW 4: SECURITY ===================== -->
        <mxCell id="flow4_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF0F0;strokeColor=#DD344C;strokeWidth=2;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="60" y="1130" width="1680" height="210" as="geometry"/>
        </mxCell>
        <mxCell id="flow4_title" value="&lt;font style=&quot;font-size:16px&quot;&gt;&lt;b&gt;FLUJO 4: Seguridad y Ciclo de Vida de Datos&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#DD344C;" vertex="1" parent="1">
          <mxGeometry x="80" y="1138" width="480" height="30" as="geometry"/>
        </mxCell>

        <!-- Security items -->
        <mxCell id="sec1" value="&lt;b&gt;Autenticación&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Amplify Basic Auth&lt;br&gt;(usuario/contraseña)&lt;br&gt;Protege todo el frontend&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="90" y="1185" width="150" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="sec2" value="&lt;b&gt;HTTPS/TLS&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;CloudFront SSL&lt;br&gt;certificado automático&lt;br&gt;Cifrado en tránsito&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="280" y="1185" width="150" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="sec3" value="&lt;b&gt;IAM Least Privilege&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Lambda role solo tiene&lt;br&gt;permisos S3 + CloudWatch&lt;br&gt;Sin acceso a otros recursos&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="470" y="1185" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="sec4" value="&lt;b&gt;S3 Presigned URLs&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Upload: 15 min expiry&lt;br&gt;Download: 60 min expiry&lt;br&gt;No acceso público al bucket&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="670" y="1185" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="sec5" value="&lt;b&gt;Data Lifecycle&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Archivos auto-eliminados&lt;br&gt;después de 1 día (S3 Lifecycle)&lt;br&gt;Sin datos persistentes&lt;br&gt;No PII almacenado&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="870" y="1180" width="170" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="sec6" value="&lt;b&gt;CORS Config&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Headers configurados&lt;br&gt;Methods: GET, POST,&lt;br&gt;PUT, DELETE, OPTIONS&lt;br&gt;Max-Age: 86400s&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1185" width="150" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="sec7" value="&lt;b&gt;CloudWatch Logging&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px;color:#888&quot;&gt;Todos los Lambda logs&lt;br&gt;capturados para auditoría&lt;br&gt;Errores monitoreados&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#DD344C;fontSize=10;fontColor=#232F3E;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="1270" y="1185" width="160" height="80" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
